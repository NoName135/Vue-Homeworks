import{m as p,e as m,l as g,_ as $,o as a,c as n,a as t,t as d,f as r,g as S,v as V,h as E,i as b,F as P,j as B,b as f,r as _,n as L,k as A,d as D}from"./index-171a5a41.js";import{m as M,c as w}from"./cartStore-30de098e.js";import{M as U}from"./modal-6bd621e5.js";import{p as q}from"./Pagination-3a33725a.js";const H={data(){return{modal:"",qty:1}},methods:{...p(w,["addToCart"]),modalShow(){this.qty=1,this.modal.show()},modalHide(){this.modal.hide()}},computed:{...m(g,["loadings"]),...m(M,["tempProduct"])},mounted(){this.modal=new U(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},N={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},R={class:"modal-dialog modal-xl",role:"document"},j={class:"modal-content border-0"},z={class:"modal-header bg-dark text-white"},F={class:"modal-title",id:"exampleModalLabel"},O=t("button",{type:"button",class:"btn-close bg-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body"},J={class:"row"},K={class:"col-sm-6"},Q=["src"],W={class:"col-sm-6"},X={class:"badge bg-primary rounded-pill"},Y={key:0,class:"h5"},Z={key:1,class:"h6"},x={key:2,class:"h5"},tt={class:"input-group"};function ot(o,e,l,i,c,u){return a(),n("div",N,[t("div",R,[t("div",j,[t("div",z,[t("h5",F,[t("span",null,d(o.tempProduct.title),1)]),O]),t("div",G,[t("div",J,[t("div",K,[t("img",{class:"img-fluid",src:o.tempProduct.imageUrl,alt:""},null,8,Q)]),t("div",W,[t("span",X,d(o.tempProduct.category),1),t("p",null,"商品描述："+d(o.tempProduct.description||"無"),1),t("p",null,"商品內容："+d(o.tempProduct.content||"無"),1),o.tempProduct.price?r("",!0):(a(),n("div",Y,d(o.tempProduct.origin_price)+" 元",1)),o.tempProduct.price?(a(),n("del",Z,"原價 "+d(o.tempProduct.origin_price)+" 元",1)):r("",!0),o.tempProduct.price?(a(),n("div",x,"現在只要 "+d(o.tempProduct.price)+" 元",1)):r("",!0),t("div",null,[t("div",tt,[S(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":e[0]||(e[0]=h=>c.qty=h)},null,512),[[V,c.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=()=>{u.modalHide(),o.addToCart(o.tempProduct.id,c.qty)})},"加入購物車")])])])])])])])],512)}const et=$(H,[["render",ot]]),{VITE_API:y,VITE_PATH:k}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"weekhomeworks",BASE_URL:"/Vue-Homeworks/week6/dist",MODE:"production",DEV:!1,PROD:!0},v=E("userProducts",{state:()=>({products:[],pagination:{}}),actions:{getProducts(o=1){const e=`${y}/api/${k}/products?page=${o}`,{loadings:l}=g();l.isLoading=!0,b.get(e).then(i=>{const{products:c,pagination:u}=i.data;this.products=c,this.pagination=u,l.isLoading=!1}).catch(i=>{l.isLoading=!1,alert(i.response.data.message)})},getProduct(o){const{loadings:e}=g(),l=`${y}/api/${k}/product/${o}`;e.loadingId=o,e.loadingBtn="productDetail",b.get(l).then(i=>{e.loadingId="",e.loadingBtn="",this.tempProduct=i.data.product}).catch(i=>{e.loadingId="",e.loadingBtn="",alert(i.response.data.message)})}},getters:{}}),st={methods:{...p(M,["createUserProductModalRef","openModal"]),...p(v,["getProducts","getProduct","addToCart"]),...p(w,["addToCart"])},computed:{...m(g,["loadings"]),...m(v,["products","pagination"])},mounted(){const o=this.$refs.userProductModal;this.createUserProductModalRef(o),this.getProducts()},components:{userProductModal:et,pagination:q}},at=t("h4",{class:"text-center"},"這裡是 前台 產品列表",-1),dt={class:"table align-middle"},nt=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),it={style:{width:"200px"}},lt={key:0,class:"h5"},rt={key:1,class:"h6"},ct={key:2,class:"h5"},ut={class:"btn-group btn-group-sm"},pt=["disabled","onClick"],mt=["disabled","onClick"];function gt(o,e,l,i,c,u){const h=_("font-awesome-icon"),C=_("pagination"),I=_("user-product-modal");return a(),n(P,null,[at,t("table",dt,[nt,t("tbody",null,[(a(!0),n(P,null,B(o.products,s=>(a(),n("tr",{key:s.id},[t("td",it,[t("div",{style:L({height:"100px",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+s.imageUrl+")"})},null,4)]),t("td",null,d(s.title),1),t("td",null,[s.price?r("",!0):(a(),n("div",lt,d(s.origin_price)+" 元",1)),s.price?(a(),n("del",rt,"原價 "+d(s.origin_price)+" 元",1)):r("",!0),s.price?(a(),n("div",ct,"現在只要 "+d(s.price)+" 元",1)):r("",!0)]),t("td",null,[t("div",ut,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:o.loadings.loadingId===s.id,onClick:T=>o.openModal(s)}," 查看更多 ",8,pt),t("button",{type:"button",class:"btn btn-outline-danger",disabled:o.loadings.loadingId===s.id,onClick:T=>o.addToCart(s.id)},[o.loadings.loadingId===s.id?(a(),A(h,{key:0,icon:["fas","spinner"],spin:""})):r("",!0),D(" 加到購物車 ")],8,mt)])])]))),128))])]),f(C,{"page-obj":o.pagination,onEmitPage:o.getProducts},null,8,["page-obj","onEmitPage"]),f(I,{ref:"userProductModal"},null,512)],64)}const ft=$(st,[["render",gt]]);export{ft as default};
